"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.MultiMap = void 0;
class MultiMap extends Map {
    add(key, value) {
        let set = super.get(key);
        if (!set) {
            set = new Set();
            super.set(key, set);
        }
        set.add(value);
        return this;
    }
    remove(key, value) {
        let set = super.get(key);
        if (set) {
            set.delete(value);
            if (!set.size) {
                super.delete(key);
            }
        }
        return this;
    }
}
exports.MultiMap = MultiMap;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibXVsdGktbWFwLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL3V0aWwvbXVsdGktbWFwLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUNBLE1BQWEsUUFBZSxTQUFRLEdBQWM7SUFFOUMsR0FBRyxDQUFDLEdBQU0sRUFBRSxLQUFRO1FBQ2hCLElBQUksR0FBRyxHQUFHLEtBQUssQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDekIsSUFBSSxDQUFDLEdBQUcsRUFBRTtZQUNOLEdBQUcsR0FBRyxJQUFJLEdBQUcsRUFBSyxDQUFDO1lBQ25CLEtBQUssQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDO1NBQ3ZCO1FBQ0QsR0FBRyxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUNmLE9BQU8sSUFBSSxDQUFDO0lBQ2hCLENBQUM7SUFFRCxNQUFNLENBQUMsR0FBTSxFQUFFLEtBQVE7UUFDbkIsSUFBSSxHQUFHLEdBQUcsS0FBSyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUN6QixJQUFJLEdBQUcsRUFBRTtZQUNMLEdBQUcsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUM7WUFDbEIsSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLEVBQUU7Z0JBQ1gsS0FBSyxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQzthQUNyQjtTQUNKO1FBQ0QsT0FBTyxJQUFJLENBQUM7SUFDaEIsQ0FBQztDQUNKO0FBdEJELDRCQXNCQyIsInNvdXJjZXNDb250ZW50IjpbIlxyXG5leHBvcnQgY2xhc3MgTXVsdGlNYXA8SywgVj4gZXh0ZW5kcyBNYXA8SywgU2V0PFY+PiB7XHJcblxyXG4gICAgYWRkKGtleTogSywgdmFsdWU6IFYpOiBNdWx0aU1hcDxLLCBWPiB7XHJcbiAgICAgICAgbGV0IHNldCA9IHN1cGVyLmdldChrZXkpO1xyXG4gICAgICAgIGlmICghc2V0KSB7XHJcbiAgICAgICAgICAgIHNldCA9IG5ldyBTZXQ8Vj4oKTtcclxuICAgICAgICAgICAgc3VwZXIuc2V0KGtleSwgc2V0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgc2V0LmFkZCh2YWx1ZSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgcmVtb3ZlKGtleTogSywgdmFsdWU6IFYpOiBNdWx0aU1hcDxLLCBWPiB7XHJcbiAgICAgICAgbGV0IHNldCA9IHN1cGVyLmdldChrZXkpO1xyXG4gICAgICAgIGlmIChzZXQpIHtcclxuICAgICAgICAgICAgc2V0LmRlbGV0ZSh2YWx1ZSk7XHJcbiAgICAgICAgICAgIGlmICghc2V0LnNpemUpIHtcclxuICAgICAgICAgICAgICAgIHN1cGVyLmRlbGV0ZShrZXkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG59XHJcbiJdfQ==